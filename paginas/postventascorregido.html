<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nueva Venta</title>
    <!-- Agrega la referencia a Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        /* Estilos CSS (puedes copiar los estilos del otro archivo si deseas) */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f8f9fa;
            padding: 20px;
        }

        h1 {
            color: #007bff;
        }

        form {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        label {
            font-weight: bold;
        }

        textarea {
            resize: vertical;
        }

        button {
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
        }

        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Nueva Venta</h1>

        <form id="createForm">
            <div class="form-group">
                <label for="clienteId">ID de Cliente:</label>
                <input type="text" class="form-control" id="clienteId" name="clienteId" required>
            </div>

            <div class="form-group">
                <label for="marcaVehiculo">Marca del Vehículo:</label>
                <input type="text" class="form-control" id="marcaVehiculo" name="marcaVehiculo" required>
            </div>

            <div class="form-group">
                <label for="modeloVehiculo">Modelo del Vehículo:</label>
                <input type="text" class="form-control" id="modeloVehiculo" name="modeloVehiculo" required>
            </div>

            <div class="form-group">
                <label for="anoVehiculo">Año del Vehículo:</label>
                <!-- Utiliza el elemento select de Bootstrap -->
                <select class="form-control" id="anoVehiculo" name="anoVehiculo" required>
                    <!-- Genera opciones desde 1800 hasta 2016 -->
                    <script>
                        var currentYear = new Date().getFullYear();
                        for (var i = 1800; i <= currentYear; i++) {
                            document.write("<option value='" + i + "'>" + i + "</option>");
                        }
                    </script>
                </select>
            </div>

            <div class="form-group">
                <label for="tipoAceite">Tipo de Aceite:</label>
                <input type="text" class="form-control" id="tipoAceite" name="tipoAceite" required>
            </div>

            <div class="form-group">
                <label for="kilometrajeActual">Kilometraje Actual:</label>
                <input type="text" class="form-control" id="kilometrajeActual" name="kilometrajeActual" required>
            </div>
            
            <div class="form-group">
                <label for="kilometrajeActual">cantidad de aceite:</label>
                <input type="text" class="form-control" id="cantidadAceite" name="cantidadAceite" required>
            </div>


            <div class="form-group">
                <label for="cambioFiltroAceite">¿Cambio de Filtro de Aceite?</label>
                <select class="form-control" id="cambioFiltroAceite" name="cambioFiltroAceite" required>
                    <option value="true">Sí</option>
                    <option value="false">No</option>
                </select>
            </div>

            <div class="form-group">
                <label for="cambioOtrosFluidos">¿Cambio de Otros Fluidos?</label>
                <select class="form-control" id="cambioOtrosFluidos" name="cambioOtrosFluidos" required>
                    <option value="true">Sí</option>
                    <option value="false">No</option>
                </select>
            </div>

            <div class="form-group">
                <label for="notasInspeccion">Notas de Inspección:</label>
                <textarea class="form-control" id="notasInspeccion" name="notasInspeccion" rows="4"></textarea>
            </div>

            <div class="form-group">
                <label for="costoAceite">Costo de Aceite:</label>
                <input type="number" class="form-control" id="costoAceite" name="costoAceite" required>
            </div>

            <div class="form-group">
                <label for="costoServicio">Costo de Servicio:</label>
                <input type="number" class="form-control" id="costoServicio" name="costoServicio" required>
            </div>

            <div class="form-group">
                <label for="estadoVehiculo">Estado del Vehículo:</label>
                <input type="text" class="form-control" id="estadoVehiculo" name="estadoVehiculo" required>
            </div>

            <div class="form-group">
                <label for="recomendaciones">Recomendaciones:</label>
                <textarea class="form-control" id="recomendaciones" name="recomendaciones" rows="4"></textarea>
            </div>

            <div class="form-group">
                <label for="tecnicoEncargado">Técnico Encargado:</label>
                <input type="text" class="form-control" id="tecnicoEncargado" name="tecnicoEncargado" required>
            </div>

            <button type="button" class="btn btn-primary" onclick="createVenta()">Crear Venta</button>
        </form>

        <div id="infoVenta"></div>
    </div>

    <!-- Agrega la referencia a Bootstrap JS y Popper.js (necesarios para algunos componentes de Bootstrap) -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        function createVenta() {
            // Obtén los valores del formulario
            var clienteId = document.getElementById("clienteId").value;
            var marcaVehiculo = document.getElementById("marcaVehiculo").value;
            var modeloVehiculo = document.getElementById("modeloVehiculo").value;
            var anoVehiculo = document.getElementById("anoVehiculo").value;
            var tipoAceite = document.getElementById("tipoAceite").value;
            var cantidadAceite = document.getElementById("cantidadAceite").value;
            var kilometrajeActual = document.getElementById("kilometrajeActual").value;
            var cambioFiltroAceite = document.getElementById("cambioFiltroAceite").value === "true";
            var cambioOtrosFluidos = document.getElementById("cambioOtrosFluidos").value === "true";
            var notasInspeccion = document.getElementById("notasInspeccion").value;
            var costoAceite = document.getElementById("costoAceite").value;
            var costoServicio = document.getElementById("costoServicio").value;
            var estadoVehiculo = document.getElementById("estadoVehiculo").value;
            var recomendaciones = document.getElementById("recomendaciones").value;
            var tecnicoEncargado = document.getElementById("tecnicoEncargado").value;

            // Construye la URL de la solicitud POST
            var apiUrl = 'https://backendalex.azurewebsites.net/ventas';

            // Construye el objeto con la información para la creación
            var newVenta = {
                "cliente": {
                    "id": clienteId
                },
                "marcaVehiculo": marcaVehiculo,
                "modeloVehiculo": modeloVehiculo,
                "anoVehiculo": anoVehiculo,
                "tipoAceite": tipoAceite,

                "cantidadAceite":cantidadAceite,

                "kilometrajeActual": kilometrajeActual,
                "cambioFiltroAceite": cambioFiltroAceite,
                "cambioOtrosFluidos": cambioOtrosFluidos,
                "notasInspeccion": notasInspeccion,
                "costoAceite": costoAceite,
                "costoServicio": costoServicio,
                "estadoVehiculo": estadoVehiculo,
                "recomendaciones": recomendaciones,
                "tecnicoEncargado": tecnicoEncargado
                // Agrega aquí los demás campos necesarios para la creación
            };

            // Realiza la solicitud POST al servidor
            fetch(apiUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(newVenta),
            })
            .then(response => response.json())
            .then(data => {
                console.log('Respuesta del servidor:', data);
                // Muestra la información de la venta creada
                mostrarInformacionVenta(data);
                // Puedes manejar la respuesta del servidor aquí
                // Por ejemplo, puedes redirigir o mostrar un mensaje de éxito
                alert('Venta creada exitosamente');
            })
            .catch((error) => {
                console.error('Error al enviar la solicitud:', error);
            });
        }

        // Función para mostrar la información de la venta creada
        function mostrarInformacionVenta(venta) {
            var infoContainer = document.getElementById("infoVenta");
            infoContainer.innerHTML = "<h2>Información de la Venta Creada</h2>";
            infoContainer.innerHTML += "<p>ID: " + venta.id + "</p>";
            infoContainer.innerHTML += "<p>Marca Vehículo: " + venta.marcaVehiculo + "</p>";
            infoContainer.innerHTML += "<p>Modelo Vehículo: " + venta.modeloVehiculo + "</p>";
            infoContainer.innerHTML += "<p>Año Vehículo: " + venta.anoVehiculo + "</p>";
            infoContainer.innerHTML += "<p>Tipo de Aceite: " + venta.tipoAceite + "</p>";
            infoContainer.innerHTML += "<p>Kilometraje Actual: " + venta.kilometrajeActual + "</p>";
            // Agrega más líneas según sea necesario para mostrar otros detalles de la venta
        }
    </script>
</body>
</html>
